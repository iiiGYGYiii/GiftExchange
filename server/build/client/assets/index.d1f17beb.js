var B=Object.defineProperty,j=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var G=(a,r,t)=>r in a?B(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,O=(a,r)=>{for(var t in r||(r={}))W.call(r,t)&&G(a,t,r[t]);if(k)for(var t of k(r))U.call(r,t)&&G(a,t,r[t]);return a},L=(a,r)=>j(a,V(r));import{j as A,L as F,r as u,l as Z,a as N,S as J,R as P,b as Q,c as X}from"./vendor.863e9c23.js";const ee=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};ee();const e=A.exports.jsx,n=A.exports.jsxs,w=A.exports.Fragment,re=()=>e("footer",{children:n("p",{children:["Made with \u2764 by:"," ",e("a",{rel:"noopener noreferrer nofollow",target:"_blank",href:"http://www.instagram.com/iiiGYGYiii",children:"iiiGYGYiii"})]})});const v={lobby:"/lobby",home:"/",createLobby:"/create-lobby",searchLobby:"/search-lobby"},D={lobbyEndpoint:"/api/v1/lobby"},T="DANDO x DANDO",ae=()=>e("header",{className:"app-header",children:n("nav",{className:"nav-header-container",children:[e("div",{className:"nav-header home",children:e(F,{to:v.home,children:e("i",{className:"fas fa-home"})})}),e("div",{className:"nav-header add",children:e(F,{to:v.createLobby,children:e("i",{className:"fas fa-plus"})})}),e("div",{className:"nav-header search",children:e(F,{to:v.searchLobby,children:e("i",{className:"fas fa-search"})})})]})});function te({children:a,handleSubmit:r,submitText:t}){return n("form",{onSubmit:r,children:[e("table",{children:e("tbody",{children:a})}),e("input",{type:"submit",value:t})]})}function M({textLabel:a,inputId:r,inputValue:t,handleKey:s,handleChange:i,handleClick:o,textButton:l,disabled:h,required:d}){return n("tr",{children:[e("td",{children:n("label",{htmlFor:r,children:[a,": "]})}),e("td",{children:e("input",{type:"text",value:t,onKeyPress:s,onChange:i,id:r,disabled:h,required:d,minLength:d?3:void 0})}),e("td",{children:e("input",{type:"button",value:h?"Corregir":l,onClick:o})})]})}function S({message:a,error:r}){return e("div",{className:`notification ${r===0?"":r===1?"warning":"error"}`,children:e("p",{children:a})})}function ne({lobbyId:a,participants:r,lobbyOwner:t}){const[s,i]=u.exports.useState(),[o,l]=u.exports.useState(!1),h=()=>{s&&clearTimeout(s),l(!0);const d=setTimeout(()=>l(!1),2e3);i(d)};return n("div",{className:"display-lobby",children:[o?e(S,{error:0,message:"\xA1C\xF3digo copiado al portapapeles!"}):null,n("h1",{className:"lobby-title",children:["SALA:"," ",e("span",{className:"lobby-id",children:e(Z.CopyToClipboard,{onCopy:h,text:a,children:n("span",{className:"clipboard",children:[" ",a," ",e("i",{className:"fas fa-clipboard"})]})})})]}),n("h2",{children:["Organizador: ",t]}),n("div",{className:"participants-container",children:[n("h3",{children:["Participantes: (",r.length+1,")"]}),e(R,{participants:r})]})]})}const _=()=>{const[a,r]=u.exports.useState(),[t,s]=u.exports.useState();return[a,o=>{r(o),t&&clearInterval(t);const l=setTimeout(()=>r(void 0),2500);s(l)}]};async function ie(a){try{const{data:r}=await N.post(D.lobbyEndpoint,a);return r.error?{error:r.message}:{lobbyId:r.lobbyId}}catch(r){return r instanceof Error?{error:r.message}:{error:"An error has ocurred! Please try again later"}}}async function oe(a){try{const{data:r,status:t}=await N.get(`${D.lobbyEndpoint}/${a}`);return r.error||t!==200?{error:r.message}:{lobbyOwner:r.lobbyOwner}}catch{return{error:"No se encontr\xF3 la sala."}}}async function se(a,r){var t,s,i;try{const{data:o}=await N.post(`${D.lobbyEndpoint}/${a}`,{participant:r});return o.matchedParticipant.errorMsg?{error:!0,message:o.matchedParticipant.errorMsg}:o.matchedParticipant}catch(o){return N.isAxiosError(o)?((t=o.response)==null?void 0:t.data.message.endsWith("match!"))?{error:2,message:"Participante ya descubri\xF3 su emparejamiento."}:((s=o.response)==null?void 0:s.data.message.endsWith("exist"))?{error:2,message:"El participante no existe en esta sala."}:(i=o.response)==null?void 0:i.data:{error:!0,message:"No se encontr\xF3 el nombre en la sala."}}}function ce({lobbyId:a,lobbyOwner:r}){const[t,s]=u.exports.useState(""),[i,o]=u.exports.useState(!1),[l,h]=u.exports.useState(),[d,m]=_();return n("div",{className:"lobby-container",children:[n("header",{children:[n("h1",{children:["SALA: ",e("span",{children:a})]}),n("h2",{children:["ORGANIZADOR: ",e("span",{children:r})]})]}),i?n("div",{className:"display-matched",children:[e("h2",{children:"El destino te asign\xF3:"}),e("div",{className:"matched-neon",children:l})]}):n("div",{className:"matcher-form",children:[n("form",{onSubmit:async f=>{var E;f.preventDefault();try{const y=await se(a,t);if(typeof y=="string"){o(!0),h(y);return}m({message:y.message,error:2})}catch(y){if(N.isAxiosError(y)){m({message:(E=y.response)==null?void 0:E.data.message,error:2});return}}},children:[e("input",{placeholder:"Tu nombre aqu\xED",type:"text",onChange:f=>{s(f.target.value)},value:t,required:!0}),e("input",{type:"submit",value:"\xBFA qui\xE9n me asignaron?"})]}),d?e(S,{error:d.error,message:d.message}):null]})]})}function R({participants:a}){return e("div",{className:"participants-display",children:a.map(r=>e("div",{className:"participant",children:r},r))})}function I({title:a,children:r,component:t}){return n("article",{className:"page-container",children:[e("header",{className:"page-title",children:e("h1",{className:"glow-fx neon",children:a})}),e("div",{className:"page-content",children:t||r})]})}function C({title:a,children:r,id:t}){return n("div",{id:t,className:"card",children:[e("div",{className:"card-title",children:e("h1",{children:a})}),e("hr",{}),e("div",{className:"card-content",children:r||null})]})}const g=(a,r)=>`${r?"#":""}carousel_slide${a}`;function le({children:a,indx:r,lastIndx:t}){return n("li",{id:g(r),tabIndex:0,className:"carousel-slide",children:[a,e("div",{className:"carousel-snapper"}),r===0&&t?e("a",{href:g(t,!0),className:"carousel-prev",children:e("i",{className:"fas fa-chevron-left"})}):e("a",{href:g(r-1,!0),className:"carousel-prev",children:e("i",{className:"fas fa-chevron-left"})}),t&&r!==0?e("a",{href:g(0,!0),className:"carousel-next",children:e("i",{className:"fas fa-chevron-right"})}):e("a",{href:g(r+1,!0),className:"carousel-next",children:e("i",{className:"fas fa-chevron-right"})})]})}function de({indx:a}){return e("li",{className:"carousel__navigation-item",children:n("a",{href:g(a,!0),className:"carousel__navigation-button",children:["Go to slide ",a]})})}function he({children:a}){const r=a.length;return n("section",{className:"carousel","aria-label":"Home-Gallery",children:[e("ol",{className:"carousel-viewport",children:a.map((t,s)=>e(le,{indx:s,lastIndx:s===0||s===r-1?r-1:void 0,children:t},`carousel__item${s}`))}),e("aside",{className:"carousel__navigation",children:e("nav",{children:e("ol",{className:"carousel__navigation-list",children:a.map((t,s)=>e(de,{indx:s},"nav"+g(s,!0)))})})})]})}function ue(){return e("div",{className:"home-container",children:n(he,{children:[e(C,{id:"welcome",title:"\xA1Bienvenido!",children:n("p",{children:["\xA1En ",e("span",{className:"span-title",children:T})," te damos la soluci\xF3n para organizar los intercambios de regalo!"]})}),e(C,{id:"why",title:"\xBFPor qu\xE9?",children:n(w,{children:[e("p",{children:"Al asignar con qui\xE9n nos toca intercambiar regalo nos podemos encontrar en situaciones inc\xF3modas como:"}),n("ul",{children:[e("li",{children:"Es muy tardado y nadie quiere hacer la t\xF3mbola."}),e("li",{children:"Me toc\xF3 mi nombre, y tenemos que repetir el proceso."}),e("li",{children:"\xA1El ciclo se cierra varias veces!"})]})]})}),e(C,{id:"how-organizer",title:"\xBFC\xF3mo?",children:n(w,{children:[e("h4",{children:"(Como organizador)"}),e("p",{children:"\xA1Tan f\xE1cil como s\xF3lo poner tu nombre (ser\xE1s el organizador del intercambio), a\xF1adir el nombre de los participantes y compartir el c\xF3digo de la sala!"})]})}),e(C,{id:"how-participant",title:"\xBFC\xF3mo?",children:n(w,{children:[e("h4",{children:"(Como participante)"}),e("p",{children:"El organizador te proporcionar\xE1 el c\xF3digo de la sala, solo deber\xE1s ingresarlo y a continuaci\xF3n poner tu nombre."}),n("p",{className:"warning-text",children:[e("span",{id:"warning-word",children:"\xA1Advertencia!"})," S\xF3lo puedes ingresar una vez, as\xED que procura tomarle ScreenShot."]})]})}),e(C,{id:"socials",title:"Acerca de m\xED",children:n(w,{children:[n("p",{children:["\xA1Hola! Soy ",e("span",{className:"span-iiigygyiii",children:"iiiGYGYiii"}),"!"]}),e("p",{children:"Puedes encontrarme en las siguientes redes sociales:"}),n("div",{className:"social-medias",children:[e("a",{rel:"noopener noreferrer nofollow",target:"_blank",href:"http://www.facebook.com/iiiGYGYiii",children:e("i",{className:"fab fa-facebook"})}),e("a",{rel:"noopener noreferrer nofollow",target:"_blank",href:"http://www.twitter.com/iiiGYGYiii",children:e("i",{className:"fab fa-twitter"})}),e("a",{rel:"noopener noreferrer nofollow",target:"_blank",href:"http://www.instagram.com/iiiGYGYiii",children:e("i",{className:"fab fa-instagram"})})]})]})})]})})}const pe={lobbyOwner:"",participants:[]},Y="",K=a=>a.length>=3,z=(a,r)=>r.includes(a),me=a=>a.length>=3,H={error:2,message:"Los nombres deben tener m\xEDnimo 3 caracteres."},be={error:2,message:"\xA1El m\xEDnimo n\xFAmero de participantes es 3(tres)! (2 participantes y 1 organizador)"},$=a=>({error:2,message:`Los participantes deben tener un nombre \xFAnico. (Trata: ${a}1)`}),fe=()=>{const[a,r]=_(),[t,s]=u.exports.useState(pe),[i,o]=u.exports.useState(Y),[l,h]=u.exports.useState(!1),[d,m]=u.exports.useState(),x=c=>{if(!K(t.lobbyOwner)){r(H),c.preventDefault();return}if(z(t.lobbyOwner,t.participants)){r($(t.lobbyOwner)),c.preventDefault();return}h(p=>!p)},b=c=>{if(!K(i)){r(H),c.preventDefault();return}if(z(i,t.participants.concat(t.lobbyOwner))){r($(i)),c.preventDefault();return}s(p=>L(O({},p),{participants:[...p.participants,i]})),o(Y),c.preventDefault()};return{handleOwnerChange:({target:c})=>{s(p=>L(O({},p),{lobbyOwner:c.value}))},handleParticipantChange:({target:c})=>{o(c.value)},handleOwnerKey:c=>{c.key==="Enter"&&x(c)},handleParticipantKey:c=>{c.key==="Enter"&&b(c)},ownerIsSet:l,handleSubmit:async c=>{if(c.preventDefault(),!me(t.participants)){r(be);return}const p=await ie(t);m(p.lobbyId)},handleOwnerClick:c=>{c.preventDefault(),x(c)},handleParticipantClick:c=>{c.preventDefault(),b(c)},lobbyOwner:t.lobbyOwner,participant:i,participants:t.participants,error:a,lobbyId:d}};function ye(){const{handleSubmit:a,lobbyOwner:r,handleOwnerKey:t,handleOwnerChange:s,handleOwnerClick:i,participant:o,handleParticipantKey:l,handleParticipantChange:h,handleParticipantClick:d,participants:m,ownerIsSet:x,error:b,lobbyId:f}=fe();return f?e(ne,{lobbyOwner:r,lobbyId:f,participants:m}):n("div",{className:"lobby-create-container",children:[b?e(S,{message:b.message,error:b.error}):null,e(te,{submitText:"\xA1Crear Sala!",handleSubmit:a,children:n(w,{children:[e(M,{textLabel:"Organizador",inputId:"lobby-owner",inputValue:r,handleKey:t,handleChange:s,textButton:"\xA1OK!",handleClick:i,disabled:x,required:!0}),e(M,{textLabel:"Participante",inputId:"participant",inputValue:o,handleKey:l,handleChange:h,textButton:"A\xF1adir",handleClick:d})]})}),e(R,{participants:m})]})}const q={message:"No se encontr\xF3 el lobby. Por favor verifica el c\xF3digo",error:2};function ge(){const[a,r]=u.exports.useState(),[t,s]=u.exports.useState(""),[i,o]=_(),l=async h=>{h.preventDefault();try{const{lobbyOwner:d}=await oe(t);if(d){r(d);return}o(q)}catch{o(q)}};return a?e(ce,{lobbyId:t,lobbyOwner:a}):n("div",{className:"search-lobby",children:[i?e(S,{message:i.message,error:i.error}):null,n("form",{onSubmit:l,children:[e("input",{type:"text",value:t,onChange:h=>s(h.target.value),pattern:"[0-9]+"}),e("button",{children:e("i",{className:"fas fa-search"})})]})]})}function ve(){return n("div",{className:"App",children:[e(ae,{}),e("main",{children:n(J,{children:[e(P,{path:v.searchLobby,children:e(I,{title:"BUSCAR SALA",children:e(ge,{})})}),e(P,{path:v.createLobby,children:e(I,{title:"CREAR SALA",children:e(ye,{})})}),e(P,{path:v.home,children:e(I,{title:T,children:e(ue,{})})})]})}),e(re,{})]})}Q.render(e(X.StrictMode,{children:e(ve,{})}),document.getElementById("root"));
